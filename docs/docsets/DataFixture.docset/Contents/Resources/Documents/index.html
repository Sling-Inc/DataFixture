<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DataFixture  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="DataFixture  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          DataFixture 2.1.0 Docs
        </a>
         (91% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/andreadelfante/DataFixture">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fandreadelfante.github.io%2FDataFixture%2Fdocsets%2FDataFixture.xml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">DataFixture Reference</a>
      <img class="carat" src="img/carat.png" />
      DataFixture  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FixtureDefinition.html">FixtureDefinition</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/JSONFixtureDefinition.html">JSONFixtureDefinition</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Realm.html">Realm</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FixtureFactory.html">FixtureFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FixtureFactoryable.html">FixtureFactoryable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FixtureMaker.html">FixtureMaker</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/JSONFixtureFactory.html">JSONFixtureFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/JSONFixtureMaker.html">JSONFixtureMaker</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/RealmSeeder.html">RealmSeeder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:11DataFixture5Realma">Realm</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='datafixture' class='heading'>DataFixture</h1>

<p><img src="https://github.com/andreadelfante/DataFixture/workflows/DataFixture%20CI/badge.svg" alt="SwiftEssentialsKit CI">
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/v/DataFixture.svg?style=flat" alt="Version"></a>
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/l/DataFixture.svg?style=flat" alt="License"></a>
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/p/DataFixture.svg?style=flat" alt="Platform"></a>
<a href="https://github.com/dwyl/esta/issues"><img src="https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat" alt="contributions welcome"></a></p>

<p>Create data models easily, with no headache. DataFixture is a convenient way to generate new data for testing / seeding your Realm Database.</p>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='cocoapods' class='heading'>Cocoapods</h3>

<blockquote>
<p>CocoaPods 0.39.0+ is required to build this library</p>
</blockquote>

<p>To install DataFixture, simply add in your Podfile <code>pod &#39;DataFixture&#39;</code> and run <code>pod install</code></p>
<h2 id='usage' class='heading'>Usage</h2>
<h3 id='basic' class='heading'>Basic</h3>

<ol>
<li>Create a new file to define the fixture factory for a model.
&ldquo;`swift
import DataFixture</li>
</ol>

<p>extension Company: FixtureFactoryable {
    static var factory: CompanyFixtureFactory {
        return CompanyFixtureFactory()
    }
}</p>

<p>struct CompanyFixtureFactory: FixtureFactory {
    typealias Model = Company</p>
<pre class="highlight plaintext"><code>func definition() -&gt; FixtureDefinition&lt;Company&gt; {
    define { (faker) in
        Company(
            name: faker.company.name(),
            employees: Person.factory.make(5)
        )
    }
}

// If you need to override a model field, simply define a function that returns a `FixtureDefinition`.
// To redefine the default definition, you must use the `redefine` function.
func empty(name: String) -&gt; FixtureDefinition&lt;Company&gt; {
    redefine { (company) in
        company.name = name
        company.employees = []
    }
}
</code></pre>

<p>}</p>
<pre class="highlight plaintext"><code>
2. Then you can build the model by using its factory.
```swift
// Create a single object of type Company.
Company.factory.make()
// Create a single object of type Company with no employees.
Company.factory.empty(name: "EmptyCompany").make()

// Create 10 objects of type Company.
Company.factory.make(10)
// Create 10 objects of type Company with no employees.
Company.factory.empty(name: "EmptyCompany").make(10)
</code></pre>
<h3 id='json-fixtures' class='heading'>JSON Fixtures</h3>

<p>A factory can create a JSON Object from a generated model.</p>

<ol>
<li>First, you have to extend <code><a href="Protocols/JSONFixtureFactory.html">JSONFixtureFactory</a></code> protocol to the model factory.
&rdquo;`swift
import DataFixture</li>
</ol>

<p>extension Company: FixtureFactoryable {
    static var factory: CompanyFixtureFactory {
        return CompanyFixtureFactory()
    }
}</p>

<p>struct CompanyFixtureFactory: JSONFixtureFactory {
    typealias Model = Company</p>
<pre class="highlight plaintext"><code>func definition() -&gt; FixtureDefinition&lt;Company&gt; {
    define { (faker) in
        Company(
            name: faker.company.name(),
            employees: Person.factory.make(5)
        )
    }
}

// This function define the json definition, using the default definition (function `definition()`).
func jsonDefinition() -&gt; JSONFixtureDefinition&lt;Company&gt; {
    defineJSON { (company) -&gt; [String : Any] in
        [
            "name": company.name,
            "employees": Person.factory.makeJSON(from: company.employees)
        ]
    }
}

// If you need to generate the JSON Object of an empty company, change the return type to `JSONFixtureDefinition`
func empty(name: String) -&gt; JSONFixtureDefinition&lt;Company&gt; { // Previously `FixtureDefinition`
    redefine { (company) in
        company.name = name
        company.employees = []
    }
}
</code></pre>

<p>}</p>
<pre class="highlight plaintext"><code>
2. Now you can generate the JSON Object of the model.
```swift
// Create a single JSON object of type Company.
Company.factory.makeJSON()
// Create a single JSON object of type Company with no employees.
Company.factory.empty(name: "EmptyCompany").makeJSON()

// Create a JSON Array of 10 objects of type Company.
Company.factory.makeJSON(10)
// Create a JSON Array of 10 objects of type Company with no employees.
Company.factory.empty(name: "EmptyCompany").makeJSON(10)

// Create a Company object with its relative JSON object.
Company.factory.makeWithJSON()
// Create 10 Company object with its relative JSON objects.
Company.factory.makeWithJSON(10)
</code></pre>

<ol>
<li>With <code><a href="Protocols/JSONFixtureFactory.html">JSONFixtureFactory</a></code> you can create a JSON from an external model object.
&ldquo;`swift
let company = Company.factory.make()
let JSONObject = Company.factory.makeJSON(from: company)</li>
</ol>

<p>let companies = Company.factory.make(3)
let JSONArray = Company.factory.makeJSON(from: companies)</p>
<pre class="highlight plaintext"><code>
## RealmSeeder
This submodule can seed some data easily in [Realm](https://github.com/realm/realm-cocoa) Database, using Seeder.
First of all, define it in your Podfile `pod 'DataFixture/RealmSeeder'`. Then create a new `struct` to define a RealmSeeder.
```swift
import DataFixture

struct ExampleSeeder: RealmSeeder {
    func run(realm: Realm) throws {
        // Put here your database population

        realm.add(Person(firstName: "Luke"), update: .all) // You can simply create an object and then add in Realm instance.
        try Dog.factory.create(10, in: realm) // You can easily create 10 fake dogs and then add in Realm instance.

        try realm.seed(AnotherSeeder.self, AnotherAnotherSeeder.self) // To call another seed, please use this function to automatic handling transactions.
    }
}
</code></pre>

<p>To run the <code>ExampleSeeder</code> just call the <strong>seed</strong> function on a Realm instance. This function automatically starts a transaction if needed.</p>
<pre class="highlight swift"><code><span class="k">try</span> <span class="n">realm</span><span class="o">.</span><span class="nf">seed</span><span class="p">(</span><span class="kt">ExampleSeeder</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
</code></pre>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>Click <a href="https://andreadelfante.github.io/DataFixture/index.html">here</a> to read the complete DataFixture API documentation.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>DataFixture is an open source project, so feel free to contribute.
You can open an issue for problems or suggestions, and you can propose your own fixes by opening a pull request with the changes.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://twitter.com/a_delfante" target="_blank" rel="external">andreadelfante</a>. All rights reserved. (Last updated: 2020-12-09)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
