<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DataFixture  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="DataFixture  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          DataFixture Docs
        </a>
         (94% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/andreadelfante/DataFixture">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fandreadelfante%2Egithub%2Eio%2Fdocsets%2FDataFixture%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">DataFixture Reference</a>
      <img class="carat" src="img/carat.png" />
      DataFixture  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FixtureAttributes.html">FixtureAttributes</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FixtureFactory.html">FixtureFactory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Realm.html">Realm</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Fixture.html">Fixture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FixtureResolver.html">FixtureResolver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/JSONFixture.html">JSONFixture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/RealmSeeder.html">RealmSeeder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DataFixtureConfig.html">DataFixtureConfig</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/FixtureBuilder.html">FixtureBuilder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:11DataFixture5Fakera">Faker</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:11DataFixture5Realma">Realm</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='datafixture' class='heading'>DataFixture</h1>

<p><img src="https://github.com/andreadelfante/DataFixture/workflows/DataFixture%20CI/badge.svg" alt="SwiftEssentialsKit CI">
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/v/DataFixture.svg?style=flat" alt="Version"></a>
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/l/DataFixture.svg?style=flat" alt="License"></a>
<a href="https://cocoapods.org/pods/DataFixture"><img src="https://img.shields.io/cocoapods/p/DataFixture.svg?style=flat" alt="Platform"></a>
<a href="https://github.com/dwyl/esta/issues"><img src="https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat" alt="contributions welcome"></a></p>

<p>Create data models easily, with no headache. DataFixture is a convenient way to generate new data for testing / seeding your Realm Database.</p>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='cocoapods' class='heading'>Cocoapods</h3>

<blockquote>
<p>CocoaPods 0.39.0+ is required to build this library</p>
</blockquote>

<p>To install DataFixture, simply add in your Podfile <code>pod &#39;DataFixture&#39;</code> and run <code>pod install</code></p>
<h2 id='usage' class='heading'>Usage</h2>
<h3 id='basic' class='heading'>Basic</h3>

<ol>
<li>Create a new file to define fixtures for each model.
&ldquo;`swift
import DataFixture</li>
</ol>

<p>let factory = FixtureFactory()</p>

<p>// This is to define only a fixture for <code>Company</code> model
factory.define(for: Company.self, { (faker, attributes, resolver) -&gt; Company in
    return Company(name: faker.company.name(),
                   employees: resolver.resolve(Person.self).create(10))
})</p>

<p>// This is to define only a fixture for <code>Company</code> model and its relative JSON Object, useful to fake network JSON responses.
factory.define(for: Company.self, { (faker, attributes, resolver) -&gt; Company in
    Company(name: faker.company.name(),
            employees: resolver.resolve(Person.self).create(10))
}) { (object, resolver) -&gt; [String : Any] in
    return [
        &quot;name&rdquo;: object.name,
        &ldquo;employees&rdquo;: resolver.resolve(Person.self).createJSON(from: object.employees)
    ]
}</p>
<pre class="highlight plaintext"><code>
2. Then you can call a fixture to build one or more fake models.
```swift
// This create a single object of type Company
factory.resolve(Company.self).create() // or `factory[Company.self].create()`

// This create 10 objects of type Company
factory.resolve(Company.self).create(10) // or `factory[Company.self].create(10)`
</code></pre>
<h3 id='advanced' class='heading'>Advanced</h3>

<ol>
<li>Create a <code>struct</code> to define a fixture.
&ldquo;`swift
import DataFixture</li>
</ol>

<p>class PersonFixtureAttributes: FixtureAttributes { // Define this class if you want to override fields without guessing keys
    fileprivate static let firstNameKey = &quot;firstName&rdquo;
    fileprivate static let lastNameKey = &ldquo;lastName&rdquo;
    fileprivate static let birthdayKey = &ldquo;birthday&rdquo;
    fileprivate static let dogsKey = &ldquo;dogs&rdquo;</p>
<pre class="highlight plaintext"><code>init(firstName: String? = nil, lastName: String? = nil, birthday: Date? = nil, dogs: [Dog]? = nil) {
    super.init(attributes: [
        PersonFixtureAttributes.firstNameKey: firstName as Any,
        PersonFixtureAttributes.lastNameKey: lastName as Any,
        PersonFixtureAttributes.birthdayKey: birthday as Any,
        PersonFixtureAttributes.dogsKey: dogs as Any
    ])
}
</code></pre>

<p>}</p>

<p>struct PersonFixture: JSONFixture { // <code><a href="Protocols/Fixture.html">Fixture</a></code> to define only a fixture model. For fixtured JSONObject you must use <code><a href="Protocols/JSONFixture.html">JSONFixture</a></code>.
    typealias Object = Person</p>
<pre class="highlight plaintext"><code>func fixture(faker: Faker, attributes: FixtureAttributes, resolver: FixtureResolver) -&gt; Person {
    return Person(
        firstName: attributes[PersonFixtureAttributes.firstNameKey, faker.name.firstName()],
        lastName: attributes[PersonFixtureAttributes.lastNameKey, faker.name.lastName()],
        birthday: attributes[PersonFixtureAttributes.birthdayKey, faker.date.forward(10)],
        dogs: attributes[PersonFixtureAttributes.dogsKey, resolver.resolve(Dog.self).create(10)]
    ])
}

func jsonFixture(object: Person, resolver: FixtureResolver) -&gt; [String : Any] {
    return [
        "firstName": object.firstName,
        "lastName": object.lastName,
        "birthday": object.birthday?.timeIntervalSince1970 as Any,
        "dogs": resolver.resolve(Dog.self).createJSON(from: object.dogs)
    ]
}
</code></pre>

<p>}</p>
<pre class="highlight plaintext"><code>
2. Override FixtureFactory and define associations in `init()`.
```swift
import DataFixture

class FixtureFactory: DataFixture.FixtureFactory {
    override init() {
        super.init()

        define(Person.self, fixture: PersonFixture.self)
    }
}
</code></pre>

<ol>
<li>Call the fixture with <code>factory</code>.
<code>swift
factory.resolve(Person.self).create()
factory.resolve(Person.self).create(PersonFixtureAttributes(firstName: &quot;Luke&quot;)) // Create a person with firstName = Luke
factory.resolve(Person.self).create(3, PersonFixtureAttributes(firstName: &quot;Luke&quot;)) // Create 3 persons with firstName = Luke
</code></li>
</ol>
<h3 id='locale-support' class='heading'>Locale support</h3>

<p>DataFixture uses <a href="https://github.com/vadymmarkov/Fakery">Fakery</a> to generate fake data. Changing the locale of Fakery is quite simple: set the language using <code>DataFixtureConfig.locale = &quot;&lt;locale&gt;&quot;</code>. All supported locales are <a href="https://github.com/vadymmarkov/Fakery/tree/master/Resources/Locales">here</a>.</p>
<h2 id='realmseeder' class='heading'>RealmSeeder</h2>

<p>This submodule can seed some data easily in <a href="https://github.com/realm/realm-cocoa">Realm</a> Database, using Seeder.
First of all, define it in your Podfile <code>pod &#39;DataFixture/RealmSeeder&#39;</code>. Then create a new <code>struct</code> to define a RealmSeeder.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">DataFixture</span>

<span class="kd">struct</span> <span class="kt">ExampleSeeder</span><span class="p">:</span> <span class="kt">RealmSeeder</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">run</span><span class="p">(</span><span class="nv">realm</span><span class="p">:</span> <span class="kt">Realm</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
        <span class="c1">// Put here your database population</span>

        <span class="n">realm</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="kt">Person</span><span class="p">(</span><span class="nv">firstName</span><span class="p">:</span> <span class="s">"Luke"</span><span class="p">),</span> <span class="nv">update</span><span class="p">:</span> <span class="o">.</span><span class="n">all</span><span class="p">)</span> <span class="c1">// You can simply create an object and then add in Realm instance.</span>
        <span class="n">realm</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">factory</span><span class="o">.</span><span class="nf">resolve</span><span class="p">(</span><span class="kt">Dog</span><span class="o">.</span><span class="k">self</span><span class="p">)</span><span class="o">.</span><span class="nf">create</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nv">update</span><span class="p">:</span> <span class="o">.</span><span class="n">all</span><span class="p">)</span> <span class="c1">// You can easily create 10 fake dogs and then add in Realm instance.</span>

        <span class="k">try</span> <span class="n">realm</span><span class="o">.</span><span class="nf">seed</span><span class="p">(</span><span class="kt">AnotherSeeder</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="kt">AnotherAnotherSeeder</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="c1">// To call another seed, please use this function to automatic handling transactions.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>To run the <code>ExampleSeeder</code> just call the <strong>seed</strong> function on a Realm instance. This function automatically starts a transaction if needed.</p>
<pre class="highlight swift"><code><span class="k">try</span> <span class="n">realm</span><span class="o">.</span><span class="nf">seed</span><span class="p">(</span><span class="kt">ExampleSeeder</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
</code></pre>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>Click <a href="https://andreadelfante.github.io/DataFixture/index.html">here</a> to read the complete DataFixture API documentation.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>DataFixture is an open source project, so feel free to contribute.
You can open an issue for problems or suggestions, and you can propose your own fixes by opening a pull request with the changes.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://twitter.com/a_delfante" target="_blank" rel="external">andreadelfante</a>. All rights reserved. (Last updated: 2020-03-15)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
